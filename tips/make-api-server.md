# APIサーバを作る時のTips

## 大きな挙動のエンドポイントを作らない

例えば、あるイベントの参加者のキャンセル率を知りたいといった機能が欲しい場合、
単純に全ユーザーのキャンセル率を取得し計算するエンドポイントを作成するのではなく、
以下のように細かくAPIを区切ってみる。

- イベント参加者を取得
- 指定した参加者のキャンセル率を取得
- 取得した全キャンセル率から総計のキャンセル率を算出

といった、３つのエンドポイントに分けるのがベターと考えられる。

何故分けるのかというと、APIサーバとしてのスケーラビリティの確保とホスティングサービスによるリクエストタイムアウト制限を乗り越えるためである。
大体のホスティングサービスのリクエストタイムアウトは30秒ほどなので、もし大きなくくりのエンドポイントを作成してしまうと
30秒制限に引っかかることが多いので注意。
